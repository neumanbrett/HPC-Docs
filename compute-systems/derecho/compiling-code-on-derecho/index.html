<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="NCAR HPC Docs website"><meta name=author content="CISL CSG (Consulting Services Group)"><link href=https://NCAR.github.io/HPC-Docs/compute-systems/derecho/compiling-code-on-derecho/ rel=canonical><link href=../derecho-use-policies/ rel=prev><link href=../starting-derecho-jobs/ rel=next><link rel=icon href="https://t0.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://arc.ucar.edu/knowledge_base/83853599"><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.3"><title>NCAR HPC Documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.50c56a3b.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../css/timeago.css><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#compiling-code-on-derecho class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="NCAR HPC Documentation" class="md-header__button md-logo" aria-label="NCAR HPC Documentation" data-md-component=logo> <img src=../../../assets/images/CISL-contemp-logo-white-square.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> NCAR HPC Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Compiling Code on Derecho </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/NCAR/HPC-Docs/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="NCAR HPC Documentation" class="md-nav__button md-logo" aria-label="NCAR HPC Documentation" data-md-component=logo> <img src=../../../assets/images/CISL-contemp-logo-white-square.png alt=logo> </a> NCAR HPC Documentation </label> <div class=md-nav__source> <a href=https://github.com/NCAR/HPC-Docs/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../../getting-started/ class="md-nav__link "> <span class=md-ellipsis> Getting Started </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/user-responsibilities/ class=md-nav__link> <span class=md-ellipsis> User Responsibilities </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <div class="md-nav__link md-nav__container"> <a href=../../../getting-started/accounts/ class="md-nav__link "> <span class=md-ellipsis> Accounts </span> </a> <label class="md-nav__link " for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Accounts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/accounts/cit-passwords/ class=md-nav__link> <span class=md-ellipsis> CIT Passwords </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3> <div class="md-nav__link md-nav__container"> <a href=../../../getting-started/accounts/duo/ class="md-nav__link "> <span class=md-ellipsis> Duo Two-Factor Authentication </span> </a> <label class="md-nav__link " for=__nav_2_3_3 id=__nav_2_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3> <span class="md-nav__icon md-icon"></span> Duo Two-Factor Authentication </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/accounts/duo/enrolling/ class=md-nav__link> <span class=md-ellipsis> Enrolling with Duo </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../getting-started/accounts/systems-accounting-manager/ class=md-nav__link> <span class=md-ellipsis> SAM </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <div class="md-nav__link md-nav__container"> <a href=../../../allocations/ class="md-nav__link "> <span class=md-ellipsis> Allocations </span> </a> <label class="md-nav__link " for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Allocations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/managing-your-allocation/ class=md-nav__link> <span class=md-ellipsis> Managing Your Allocation </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_3> <div class="md-nav__link md-nav__container"> <a href=../../../allocations/ncar-allocations/ class="md-nav__link "> <span class=md-ellipsis> NCAR Allocations </span> </a> <label class="md-nav__link " for=__nav_2_4_3 id=__nav_2_4_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> NCAR Allocations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../allocations/ncar-allocations/ncar-strategic-capability-nsc-projects/ class=md-nav__link> <span class=md-ellipsis> NCAR Strategic Capability (NSC) projects </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4> <div class="md-nav__link md-nav__container"> <a href=../../../allocations/university-allocations/ class="md-nav__link "> <span class=md-ellipsis> University Allocations </span> </a> <label class="md-nav__link " for=__nav_2_4_4 id=__nav_2_4_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4> <span class="md-nav__icon md-icon"></span> University Allocations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../allocations/university-allocations/university-large-allocation-request-preparation-instructions/ class=md-nav__link> <span class=md-ellipsis> University Large Allocation Request Preparation Instructions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../allocations/determining-computational-resource-needs/ class=md-nav__link> <span class=md-ellipsis> Determining computational resource needs </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_6> <div class="md-nav__link md-nav__container"> <a href=../../../allocations/chap/ class="md-nav__link "> <span class=md-ellipsis> CISL HPC Allocations Panel </span> </a> <label class="md-nav__link " for=__nav_2_4_6 id=__nav_2_4_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_6> <span class="md-nav__icon md-icon"></span> CISL HPC Allocations Panel </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../allocations/chap/chap-allocation-review-criteria/ class=md-nav__link> <span class=md-ellipsis> Allocation Review Criteria </span> </a> </li> <li class=md-nav__item> <a href=../../../allocations/chap/chap-conflict-of-interest-policy/ class=md-nav__link> <span class=md-ellipsis> Conflict of Interest Policy </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../getting-started/vpn-access/ class=md-nav__link> <span class=md-ellipsis> VPN access </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/system-usage-policies/ class=md-nav__link> <span class=md-ellipsis> System Usage Policies </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/data-retention-policies/ class=md-nav__link> <span class=md-ellipsis> Data Retention Policies </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/best-practices-for-supercomputer-users/ class=md-nav__link> <span class=md-ellipsis> Best Practices for Supercomputer Users </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/acknowledging-ncar-and-cisl/ class=md-nav__link> <span class=md-ellipsis> Acknowledging NCAR and CISL </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../../storage-systems/ class="md-nav__link "> <span class=md-ellipsis> Storage Systems and Data Transfer </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Storage Systems and Data Transfer </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__container"> <a href=../../../storage-systems/glade/ class="md-nav__link "> <span class=md-ellipsis> GLADE (POSIX File Systems) </span> </a> <label class="md-nav__link " for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> GLADE (POSIX File Systems) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../storage-systems/glade/campaign/ class=md-nav__link> <span class=md-ellipsis> Campaign storage file system </span> </a> </li> <li class=md-nav__item> <a href=../../../storage-systems/glade/lustre/ class=md-nav__link> <span class=md-ellipsis> Lustre file systems </span> </a> </li> <li class=md-nav__item> <a href=../../../storage-systems/glade/setting-file-directory-permissions/ class=md-nav__link> <span class=md-ellipsis> Setting File and Directory Permissions </span> </a> </li> <li class=md-nav__item> <a href=../../../storage-systems/glade/using-access-control-lists/ class=md-nav__link> <span class=md-ellipsis> Using Access Control Lists </span> </a> </li> <li class=md-nav__item> <a href=../../../storage-systems/glade/recovering-files-from-snapshots/ class=md-nav__link> <span class=md-ellipsis> Recovering files from snapshots </span> </a> </li> <li class=md-nav__item> <a href=../../../storage-systems/glade/removing-large-number-of-files/ class=md-nav__link> <span class=md-ellipsis> Removing large number of files </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__container"> <a href=../../../storage-systems/quasar/ class="md-nav__link "> <span class=md-ellipsis> Quasar (Tape Storgae) </span> </a> <label class="md-nav__link " for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Quasar (Tape Storgae) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../storage-systems/quasar/quasar%2Bsystem%2Bspecifications/ class=md-nav__link> <span class=md-ellipsis> Quasar system specifications </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__container"> <a href=../../../storage-systems/stratus/ class="md-nav__link "> <span class=md-ellipsis> Stratus (Object Storage) </span> </a> <label class="md-nav__link " for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Stratus (Object Storage) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../storage-systems/stratus/getting-started-with-an-object-storage-admin-account/ class=md-nav__link> <span class=md-ellipsis> Getting started with an object storage admin account </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../storage-systems/data-access-nodes/ class=md-nav__link> <span class=md-ellipsis> Data Access Nodes </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <div class="md-nav__link md-nav__container"> <a href=../../../storage-systems/data-transfer/ class="md-nav__link "> <span class=md-ellipsis> Transferring Data </span> </a> <label class="md-nav__link " for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Transferring Data </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6_2> <div class="md-nav__link md-nav__container"> <a href=../../../storage-systems/data-transfer/globus/ class="md-nav__link "> <span class=md-ellipsis> Globus </span> </a> <label class="md-nav__link " for=__nav_3_6_2 id=__nav_3_6_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6_2> <span class="md-nav__icon md-icon"></span> Globus </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../storage-systems/data-transfer/globus/Sharing%2Bdata%2Band%2Bmaking%2Bunattended%2Btransfers/ class=md-nav__link> <span class=md-ellipsis> Sharing data and making unattended transfers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../storage-systems/data-transfer/scp-and-sftp/ class=md-nav__link> <span class=md-ellipsis> SCP, SFTP and other tools </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../storage-systems/cmip-analysis-platform/ class=md-nav__link> <span class=md-ellipsis> CMIP Analysis Platform </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../../environment-and-software/ class="md-nav__link "> <span class=md-ellipsis> User Environment and HPC Software </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> User Environment and HPC Software </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <div class="md-nav__link md-nav__container"> <a href=../../../environment-and-software/user-environment/ class="md-nav__link "> <span class=md-ellipsis> User Environment </span> </a> <label class="md-nav__link " for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> User Environment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../environment-and-software/user-environment/modules/ class=md-nav__link> <span class=md-ellipsis> Modules </span> </a> </li> <li class=md-nav__item> <a href=../../../environment-and-software/user-environment/conda/ class=md-nav__link> <span class=md-ellipsis> Conda </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_4> <div class="md-nav__link md-nav__container"> <a href=../../../environment-and-software/user-environment/containers/ class="md-nav__link "> <span class=md-ellipsis> Containers </span> </a> <label class="md-nav__link " for=__nav_4_2_4 id=__nav_4_2_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_4> <span class="md-nav__icon md-icon"></span> Containers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../environment-and-software/user-environment/containers/working_with_containers/ class=md-nav__link> <span class=md-ellipsis> Working with Containers </span> </a> </li> <li class=md-nav__item> <a href=../../../environment-and-software/user-environment/containers/examples/ class=md-nav__link> <span class=md-ellipsis> Example Workflows </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../environment-and-software/user-environment/utilities/ class=md-nav__link> <span class=md-ellipsis> Utilities </span> </a> </li> <li class=md-nav__item> <a href=../../../environment-and-software/user-environment/customizing/ class=md-nav__link> <span class=md-ellipsis> Customizing User Environment </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_7> <div class="md-nav__link md-nav__container"> <a href=../../../environment-and-software/user-environment/spack/ class="md-nav__link "> <span class=md-ellipsis> Spack </span> </a> <label class="md-nav__link " for=__nav_4_2_7 id=__nav_4_2_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_7> <span class="md-nav__icon md-icon"></span> Spack </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../environment-and-software/user-environment/spack/spack-downstream/ class=md-nav__link> <span class=md-ellipsis> Spack Downstream </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <div class="md-nav__link md-nav__container"> <a href=../../../environment-and-software/hpc-software/ class="md-nav__link "> <span class=md-ellipsis> HPC Software </span> </a> <label class="md-nav__link " for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> HPC Software </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../environment-and-software/community-models/ class=md-nav__link> <span class=md-ellipsis> Community Models </span> </a> </li> <li class=md-nav__item> <a href=../../../environment-and-software/data-analysis-and-visualization/ class=md-nav__link> <span class=md-ellipsis> Data Analysis and Visualization </span> </a> </li> <li class=md-nav__item> <a href=../../../environment-and-software/ncl/ class=md-nav__link> <span class=md-ellipsis> NCL </span> </a> </li> <li class=md-nav__item> <a href=../../../environment-and-software/matlab-parallel-computing-toolbox/ class=md-nav__link> <span class=md-ellipsis> MATLAB Parallel Computing Toolbox </span> </a> </li> <li class=md-nav__item> <a href=../../../environment-and-software/numerical-libraries/ class=md-nav__link> <span class=md-ellipsis> Numerical Libraries </span> </a> </li> <li class=md-nav__item> <a href=../../../environment-and-software/machine-learning-and-deep-learning/ class=md-nav__link> <span class=md-ellipsis> Machine Learning and Deep Learning </span> </a> </li> <li class=md-nav__item> <a href=../../../environment-and-software/ncar-classic-libraries-for-geophysics/ class=md-nav__link> <span class=md-ellipsis> NCAR Classic Libraries for Geophysics </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_9> <label class=md-nav__link for=__nav_4_3_9 id=__nav_4_3_9_label tabindex=0> <span class=md-ellipsis> Profiling & Debuggers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_9_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_9> <span class="md-nav__icon md-icon"></span> Profiling & Debuggers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../environment-and-software/hpc-software/profiling-and-debuggers/running-ddt-map-and-pr-jobs/ class=md-nav__link> <span class=md-ellipsis> Debugging and Profiling with Forge Tools </span> </a> </li> <li class=md-nav__item> <a href=../../../environment-and-software/hpc-software/profiling-and-debuggers/intel-parallel-studio-xe/ class=md-nav__link> <span class=md-ellipsis> Intel Parallel Studio XE </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3_10> <div class="md-nav__link md-nav__container"> <a href=../../../environment-and-software/benchmarks/ class="md-nav__link "> <span class=md-ellipsis> Benchmarks </span> </a> <label class="md-nav__link " for=__nav_4_3_10 id=__nav_4_3_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_3_10_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3_10> <span class="md-nav__icon md-icon"></span> Benchmarks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../environment-and-software/benchmarks/ncar-benchmarking-2015/ class=md-nav__link> <span class=md-ellipsis> NCAR Benchmarking applications - 2015 release </span> </a> </li> <li class=md-nav__item> <a href=../../../environment-and-software/benchmarks/ncar-benchmarking-2019-2020/ class=md-nav__link> <span class=md-ellipsis> NCAR Benchmarking applications - 2019-2020 release </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Compute Systems and Services </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Compute Systems and Services </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Derecho </span> </a> <label class="md-nav__link " for=__nav_5_1 id=__nav_5_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_1_label aria-expanded=true> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> Derecho </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../derecho-use-policies/ class=md-nav__link> <span class=md-ellipsis> Derecho Use Policies </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Compiling Code on Derecho </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Compiling Code on Derecho </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Page Outline"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Page Outline </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#compilers-available-on-derecho class=md-nav__link> <span class=md-ellipsis> Compilers available on Derecho </span> </a> </li> <li class=md-nav__item> <a href=#compiler-commands class=md-nav__link> <span class=md-ellipsis> Compiler Commands </span> </a> <nav class=md-nav aria-label="Compiler Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#compiler-man-pages class=md-nav__link> <span class=md-ellipsis> Compiler man pages </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#changing-compilers class=md-nav__link> <span class=md-ellipsis> Changing compilers </span> </a> </li> <li class=md-nav__item> <a href=#compiling-cpu-code class=md-nav__link> <span class=md-ellipsis> Compiling CPU code </span> </a> <nav class=md-nav aria-label="Compiling CPU code"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-the-cray-compiler-collection class=md-nav__link> <span class=md-ellipsis> Using the Cray compiler collection </span> </a> </li> <li class=md-nav__item> <a href=#using-cray-mpich-mpi class=md-nav__link> <span class=md-ellipsis> Using Cray MPICH MPI </span> </a> <nav class=md-nav aria-label="Using Cray MPICH MPI"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#environment-variable-example class=md-nav__link> <span class=md-ellipsis> Environment variable example </span> </a> </li> <li class=md-nav__item> <a href=#mpiexec-options-example class=md-nav__link> <span class=md-ellipsis> mpiexec options example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#other-compilers class=md-nav__link> <span class=md-ellipsis> Other compilers </span> </a> <nav class=md-nav aria-label="Other compilers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-intel-compilers class=md-nav__link> <span class=md-ellipsis> Using Intel compilers </span> </a> <nav class=md-nav aria-label="Using Intel compilers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimizing-your-code-with-intel-compilers class=md-nav__link> <span class=md-ellipsis> Optimizing your code with Intel compilers </span> </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#compiling-gpu-code class=md-nav__link> <span class=md-ellipsis> Compiling GPU code </span> </a> <nav class=md-nav aria-label="Compiling GPU code"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#openacc class=md-nav__link> <span class=md-ellipsis> OpenACC </span> </a> </li> <li class=md-nav__item> <a href=#openmp class=md-nav__link> <span class=md-ellipsis> OpenMP </span> </a> </li> <li class=md-nav__item> <a href=#cuda class=md-nav__link> <span class=md-ellipsis> CUDA </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#native-compiler-commands class=md-nav__link> <span class=md-ellipsis> Native Compiler Commands </span> </a> </li> <li class=md-nav__item> <a href=#multiple-compiler-versions-and-user-applications class=md-nav__link> <span class=md-ellipsis> Multiple Compiler Versions and User Applications </span> </a> </li> <li class=md-nav__item> <a href=#common-compiler-options-and-diagnostic-flags class=md-nav__link> <span class=md-ellipsis> Common Compiler Options and Diagnostic Flags </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1_4> <div class="md-nav__link md-nav__container"> <a href=../starting-derecho-jobs/ class="md-nav__link "> <span class=md-ellipsis> Starting Derecho Jobs </span> </a> <label class="md-nav__link " for=__nav_5_1_4 id=__nav_5_1_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1_4> <span class="md-nav__icon md-icon"></span> Starting Derecho Jobs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1_4_2> <label class=md-nav__link for=__nav_5_1_4_2 id=__nav_5_1_4_2_label tabindex=0> <span class=md-ellipsis> Derecho Job Script Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_5_1_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1_4_2> <span class="md-nav__icon md-icon"></span> Derecho Job Script Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../starting-derecho-jobs/derecho-job-script-examples/ class=md-nav__link> <span class=md-ellipsis> Derecho batch job script examples </span> </a> </li> <li class=md-nav__item> <a href=../starting-derecho-jobs/process-binding/ class=md-nav__link> <span class=md-ellipsis> Process Binding </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../derecho-modules/ class=md-nav__link> <span class=md-ellipsis> Derecho Software </span> </a> </li> <li class=md-nav__item> <a href=../moving-from-cheyenne/ class=md-nav__link> <span class=md-ellipsis> Moving to Derecho from Cheyenne </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <div class="md-nav__link md-nav__container"> <a href=../../casper/ class="md-nav__link "> <span class=md-ellipsis> Casper </span> </a> <label class="md-nav__link " for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Casper </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../casper/casper-use-policies/ class=md-nav__link> <span class=md-ellipsis> Casper Use Policies </span> </a> </li> <li class=md-nav__item> <a href=../../casper/compiling-code-on-casper/ class=md-nav__link> <span class=md-ellipsis> Compiling Code on Casper </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2_4> <div class="md-nav__link md-nav__container"> <a href=../../casper/starting-casper-jobs/ class="md-nav__link "> <span class=md-ellipsis> Starting Casper Jobs </span> </a> <label class="md-nav__link " for=__nav_5_2_4 id=__nav_5_2_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2_4> <span class="md-nav__icon md-icon"></span> Starting Casper Jobs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../casper/starting-casper-jobs/casper-job-script-examples/ class=md-nav__link> <span class=md-ellipsis> Casper job Script Examples </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../casper/remote-desktops/ class=md-nav__link> <span class=md-ellipsis> Using Remote Desktops </span> </a> </li> <li class=md-nav__item> <a href=../../casper/casper-modules/ class=md-nav__link> <span class=md-ellipsis> Casper Software </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <div class="md-nav__link md-nav__container"> <a href=../../jupyterhub/ class="md-nav__link "> <span class=md-ellipsis> JupyterHub </span> </a> <label class="md-nav__link " for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> JupyterHub </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../jupyter-and-ipython/ class=md-nav__link> <span class=md-ellipsis> Jupyter and IPython </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> <span class=md-ellipsis> Additional Resources </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Additional Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../additional-resources/cron/ class=md-nav__link> <span class=md-ellipsis> Cron services </span> </a> </li> <li class=md-nav__item> <a href=../../additional-resources/thunder-test-system/ class=md-nav__link> <span class=md-ellipsis> Thunder test system </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../../../pbs/ class="md-nav__link "> <span class=md-ellipsis> Running Jobs (PBS) </span> </a> <label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Running Jobs (PBS) </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <div class="md-nav__link md-nav__container"> <a href=../../../pbs/job-scripts/ class="md-nav__link "> <span class=md-ellipsis> Job Scripts </span> </a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Job Scripts </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../pbs/charging/ class=md-nav__link> <span class=md-ellipsis> Queues and Charging </span> </a> </li> <li class=md-nav__item> <a href=../../../pbs/preemption/ class=md-nav__link> <span class=md-ellipsis> Using Preemption </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_5> <div class="md-nav__link md-nav__container"> <a href=../../../pbs/common-causes-of-job-failures/ class="md-nav__link "> <span class=md-ellipsis> Common Causes of Job Failures </span> </a> <label class="md-nav__link " for=__nav_6_5 id=__nav_6_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_5_label aria-expanded=false> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> Common Causes of Job Failures </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_5_2> <div class="md-nav__link md-nav__container"> <a href=../../../pbs/checking-memory-use/ class="md-nav__link "> <span class=md-ellipsis> Checking Memory Use </span> </a> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_5_2> <span class="md-nav__icon md-icon"></span> Checking Memory Use </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../pbs/storing-temporary-files/ class=md-nav__link> <span class=md-ellipsis> Storing temporary files </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <div class="md-nav__link md-nav__container"> <a href=../../../tutorials/ class="md-nav__link "> <span class=md-ellipsis> Tutorials </span> </a> <label class="md-nav__link " for=__nav_7 id=__nav_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/new-user-training/ class=md-nav__link> <span class=md-ellipsis> New User Training </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/dask-tutorial/ class=md-nav__link> <span class=md-ellipsis> Dask Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/profiling-and-debugging/ class=md-nav__link> <span class=md-ellipsis> Profiling and Debugging </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/advanced-pbs/ class=md-nav__link> <span class=md-ellipsis> Advanced PBS </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/jupyterhub/ class=md-nav__link> <span class=md-ellipsis> JupyterHub </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/containers/ class=md-nav__link> <span class=md-ellipsis> Containers </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/gpu-workshop/ class=md-nav__link> <span class=md-ellipsis> GPU Workshop </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <div class="md-nav__link md-nav__container"> <a href=../../../user-support/ class="md-nav__link "> <span class=md-ellipsis> User Support </span> </a> <label class="md-nav__link " for=__nav_8 id=__nav_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> User Support </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_2> <label class=md-nav__link for=__nav_8_2 id=__nav_8_2_label tabindex=0> <span class=md-ellipsis> Troubleshooting Tips </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_2_label aria-expanded=false> <label class=md-nav__title for=__nav_8_2> <span class="md-nav__icon md-icon"></span> Troubleshooting Tips </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user-support/troubleshooting-tips/killed-processes-on-login-nodes/ class=md-nav__link> <span class=md-ellipsis> Killed processes on login nodes </span> </a> </li> <li class=md-nav__item> <a href=../../../user-support/troubleshooting-tips/common-causes-of-job-failures/ class=md-nav__link> <span class=md-ellipsis> Common causes of job failures </span> </a> </li> <li class=md-nav__item> <a href=../../../user-support/troubleshooting-tips/batch-job-crashing/ class=md-nav__link> <span class=md-ellipsis> Batch jobs crashing </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <div class="md-nav__link md-nav__container"> <a href=../../../nhug/ class="md-nav__link "> <span class=md-ellipsis> NCAR User Group (NHUG) </span> </a> <label class="md-nav__link " for=__nav_9 id=__nav_9_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> NCAR User Group (NHUG) </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_2> <div class="md-nav__link md-nav__container"> <a href=../../../nhug/archive/ class="md-nav__link "> <span class=md-ellipsis> Archive of Past Meetings </span> </a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_2_label aria-expanded=false> <label class=md-nav__title for=__nav_9_2> <span class="md-nav__icon md-icon"></span> Archive of Past Meetings </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../nhug/upcoming-events/ class=md-nav__link> <span class=md-ellipsis> NHUG Upcoming Events </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing to the Documentation </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Page Outline"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Page Outline </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#compilers-available-on-derecho class=md-nav__link> <span class=md-ellipsis> Compilers available on Derecho </span> </a> </li> <li class=md-nav__item> <a href=#compiler-commands class=md-nav__link> <span class=md-ellipsis> Compiler Commands </span> </a> <nav class=md-nav aria-label="Compiler Commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#compiler-man-pages class=md-nav__link> <span class=md-ellipsis> Compiler man pages </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#changing-compilers class=md-nav__link> <span class=md-ellipsis> Changing compilers </span> </a> </li> <li class=md-nav__item> <a href=#compiling-cpu-code class=md-nav__link> <span class=md-ellipsis> Compiling CPU code </span> </a> <nav class=md-nav aria-label="Compiling CPU code"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-the-cray-compiler-collection class=md-nav__link> <span class=md-ellipsis> Using the Cray compiler collection </span> </a> </li> <li class=md-nav__item> <a href=#using-cray-mpich-mpi class=md-nav__link> <span class=md-ellipsis> Using Cray MPICH MPI </span> </a> <nav class=md-nav aria-label="Using Cray MPICH MPI"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#environment-variable-example class=md-nav__link> <span class=md-ellipsis> Environment variable example </span> </a> </li> <li class=md-nav__item> <a href=#mpiexec-options-example class=md-nav__link> <span class=md-ellipsis> mpiexec options example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#other-compilers class=md-nav__link> <span class=md-ellipsis> Other compilers </span> </a> <nav class=md-nav aria-label="Other compilers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-intel-compilers class=md-nav__link> <span class=md-ellipsis> Using Intel compilers </span> </a> <nav class=md-nav aria-label="Using Intel compilers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optimizing-your-code-with-intel-compilers class=md-nav__link> <span class=md-ellipsis> Optimizing your code with Intel compilers </span> </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#compiling-gpu-code class=md-nav__link> <span class=md-ellipsis> Compiling GPU code </span> </a> <nav class=md-nav aria-label="Compiling GPU code"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#openacc class=md-nav__link> <span class=md-ellipsis> OpenACC </span> </a> </li> <li class=md-nav__item> <a href=#openmp class=md-nav__link> <span class=md-ellipsis> OpenMP </span> </a> </li> <li class=md-nav__item> <a href=#cuda class=md-nav__link> <span class=md-ellipsis> CUDA </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#native-compiler-commands class=md-nav__link> <span class=md-ellipsis> Native Compiler Commands </span> </a> </li> <li class=md-nav__item> <a href=#multiple-compiler-versions-and-user-applications class=md-nav__link> <span class=md-ellipsis> Multiple Compiler Versions and User Applications </span> </a> </li> <li class=md-nav__item> <a href=#common-compiler-options-and-diagnostic-flags class=md-nav__link> <span class=md-ellipsis> Common Compiler Options and Diagnostic Flags </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/NCAR/HPC-Docs/edit/main/docs/compute-systems/derecho/compiling-code-on-derecho/index.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <a href=https://github.com/NCAR/HPC-Docs/raw/main/docs/compute-systems/derecho/compiling-code-on-derecho/index.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg> </a> <h1 id=compiling-code-on-derecho>Compiling code on Derecho<a class=headerlink href=#compiling-code-on-derecho title="Permanent link">&para;</a></h1> <h2 id=compilers-available-on-derecho>Compilers available on Derecho<a class=headerlink href=#compilers-available-on-derecho title="Permanent link">&para;</a></h2> <p>Several C/C++ and Fortran compilers are available on all NCAR HPC systems. The information on this page applies to all of those systems except where noted.</p> <table style=width:100%;> <colgroup> <col style="width: 24%"> <col style="width: 12%"> <col style="width: 20%"> <col style="width: 20%"> <col style="width: 24%"> </colgroup> <thead> <tr class=header> <th><strong>Compiler</strong></th> <th><strong>Language</strong></th> <th><strong>Commands for serial programs</strong></th> <th><strong>Commands for programs<br> using MPI</strong></th> <th><strong>Flags to enable OpenMP</strong></th> </tr> </thead> <tbody> <tr class=odd> <td rowspan=3><strong>Intel</strong> (Classic/OneAPI)*</td> <td>Fortran</td> <td><pre>ifort / ifx</pre></td> <td><pre>mpif90</pre></td> <td rowspan=3><pre>-qopenmp</pre></td> </tr> <tr class=even> <td>C</td> <td><pre>icc / icx</pre></td> <td><pre>mpicc</pre></td> </tr> <tr class=odd> <td>C++</td> <td><pre>icpc / icpx</pre></td> <td><pre>mpicxx</pre></td> </tr> <tr class=even> <td rowspan=3><strong>NVIDIA HPC SDK</strong></td> <td>Fortran</td> <td><pre>nvfortran</pre></td> <td><pre>mpif90</pre></td> <td rowspan=3><pre>-mp</pre></td> </tr> <tr class=odd> <td>C</td> <td><pre>nvc</pre></td> <td><pre>mpicc</pre></td> </tr> <tr class=even> <td>C++</td> <td><pre>nvc++</pre></td> <td><pre>mpicxx</pre></td> </tr> <tr class=odd> <td rowspan=3><strong>GNU Compiler Collection (GCC)</strong></td> <td>Fortran</td> <td><pre>gfortran</pre></td> <td><pre>mpif90</pre></td> <td rowspan=3><pre>-fopenmp</pre></td> </tr> <tr class=even> <td>C</td> <td><pre>gcc</pre></td> <td><pre>mpicc</pre></td> </tr> <tr class=odd> <td>C++</td> <td><pre>g++</pre></td> <td><pre>mpicxx</pre></td> </tr> <tr class=even> <td rowspan=3><strong>Cray Compiler</strong> (Derecho only)**</td> <td>Fortran</td> <td><pre>ftn</pre></td> <td><pre>mpif90</pre></td> <td rowspan=3><pre>-fopenmp</pre></td> </tr> <tr class=odd> <td>C</td> <td><pre>cc</pre></td> <td><pre>mpicc</pre></td> </tr> <tr class=even> <td>C++</td> <td><pre>CC</pre></td> <td><pre>mpicxx</pre></td> </tr> <tr class=odd> <td colspan=5>* Intel OneAPI is a cross-platform toolkit that supports C, C++, Fortran, and Python programming languages and replaces <a href=https://www.intel.com/content/www/us/en/developer/articles/release-notes/intel-parallel-studio-xe-supported-and-unsupported-product-versions.html>Intel Parallel Studio</a>. Derecho supports both Intel OneAPI and Intel Classic Compilers. Intel is planning to retire the Intel Classic compilers and is moving toward Intel OneAPI. Intel Classic Compiler commands (ifort, icc, and icpc) will be replaced by the Intel OneAPI compilers (ifx, icx, and icpx).</td> </tr> <tr class=even> <td colspan=5>** Please note that mpi wrappers are not available by default using Cray compilers but the ncarcompilers module will translate a call to “mpicc” to “cc” (and likewise for the other languages) as a convenience.</td> </tr> </tbody> </table> <h2 id=compiler-commands>Compiler Commands<a class=headerlink href=#compiler-commands title="Permanent link">&para;</a></h2> <p>All supported compilers are available via the <code>module</code> utility. After loading the compiler module you want to use, refer to the table above to identify and run the appropriate compilation wrapper command.</p> <p>If your script already includes one of the following generic MPI commands, there is no need to change it:</p> <ul> <li> <p><code>mpif90</code>, <code>mpif77</code>, <code>ftn</code>*</p> </li> <li> <p><code>mpicc</code>, <code>cc</code>*</p> </li> <li> <p><code>mpiCC</code>, <code>CC</code>*</p> </li> </ul> <p>*The wrappers <code>ftn</code>, <code>cc</code>, and <code>CC</code> are Cray-specific only available on Derecho.</p> <p>Build any libraries that you need to support an application with the same compiler, compiler version, and compatible flags used to compile the other parts of the application, including the main executable(s). Also, before you run the applications, be sure you have loaded the same <a href=../../../environment-and-software/user-environment/modules/ >module/version environment</a> in which you created the applications. This will help you avoid job failures that can result from missing MPI launchers and library routines.</p> <h3 id=compiler-man-pages>Compiler <code>man</code> pages<a class=headerlink href=#compiler-man-pages title="Permanent link">&para;</a></h3> <p>To refer to the <code>man</code> page for a compiler, log in to the system where you intend to use it, load the module, then execute <code>man</code> for the compiler. For example: <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>module load nvhpc
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>man nvfortran
</span></code></pre></div></p> <p>You can also use <code>-help</code> flags for a description of the command-line options for each compiler. Follow this example: <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>ifort -help
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>nvfortran -help [=option]
</span></code></pre></div></p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Use compiler <a href=./#common-compiler-options-and-diagnostic-flags>diagnostic flags</a> to identify potential problems while compiling the code.</p> </div> <h2 id=changing-compilers>Changing compilers<a class=headerlink href=#changing-compilers title="Permanent link">&para;</a></h2> <p>To change from one compiler to another, use <code>module swap</code>. In this example, you are switching from Intel to NVIDIA: <div class="language-sh highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>module<span class=w> </span>swap<span class=w> </span>intel<span class=w> </span>nvhpc
</span></code></pre></div></p> <p>When you load a compiler module or change to a different compiler, the system makes other compatible modules available. This helps you establish a working environment and avoid conflicts.</p> <p>If you need to link your program with a library, use <code>module load</code> to load the library as in this example: <div class="language-sh highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>module<span class=w> </span>load<span class=w> </span>netcdf
</span></code></pre></div></p> <p>Then you can invoke the desired compilation command, including any library linking options such as <code>-lnetcdf</code>. Here's an example: <div class="language-sh highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>mpif90-o<span class=w> </span>foo.exe<span class=w> </span>foo.f90<span class=w> </span>-lnetcdf
</span></code></pre></div></p> <h2 id=compiling-cpu-code>Compiling CPU code<a class=headerlink href=#compiling-cpu-code title="Permanent link">&para;</a></h2> <h3 id=using-the-cray-compiler-collection>Using the Cray compiler collection<a class=headerlink href=#using-the-cray-compiler-collection title="Permanent link">&para;</a></h3> <p>Derecho users have access to the Cray Compiling Environment (CCE) using the <code>cce</code> module. The compiler collection includes <code>cc</code>, <code>CC</code>, and <code>ftn</code> for compiling C, C++, and Fortran codes.</p> <p>To see which versions of the compiler are available, use the <code>module avail</code> command: <div class="language-sh highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>module<span class=w> </span>avail<span class=w> </span>cce
</span></code></pre></div></p> <p>CCE base compilers are available by default in the <code>ncarcompilers</code> module. Loading the <code>ncarcompilers</code> module simplifies building code with dependencies such as netCDF. For example, compiling a simple Fortran code using netCDF is as follows with the compiler wrappers: <div class="language-sh highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>ftn<span class=w> </span>-o<span class=w> </span>mybin<span class=w> </span>-lnetcdff<span class=w> </span>mycode.f90
</span></code></pre></div></p> <p>Meanwhile, if you did not have the <code>ncarcompilers</code> module loaded, you would need to run the following command instead, with the linker flags and include-paths: <div class="language-sh highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>ftn<span class=w> </span>-I/path/to/netcdf/include<span class=w> </span>-L/path/to/netcdf/lib<span class=w> </span>-lnetcdff<span class=w> </span>-o<span class=w> </span>mybin<span class=w> </span>mycode.f90
</span></code></pre></div></p> <h3 id=using-cray-mpich-mpi>Using Cray MPICH MPI<a class=headerlink href=#using-cray-mpich-mpi title="Permanent link">&para;</a></h3> <p>Unlike other MPI libraries, Cray MPICH does <strong>NOT</strong> provide MPI wrapper commands like <code>mpicc</code>, <code>mpicxx</code>, and <code>mpif90</code>. Rather, use the same <code>cc</code>, <code>CC</code>, and <code>ftn</code> commands you use to compile a serial code. The Cray Programming Environment (CPE) will add MPI build flags to your commands whenever you have the <code>cray-mpich</code> module loaded.</p> <p>As many application build systems expect the MPI wrappers, our <code>ncarcompilers</code> module will translate a call to <code>mpicc</code> to <code>cc</code> (and likewise for the other languages) as a convenience, typically eliminating the need to alter pre-existing build scripts.</p> <p>Cray MPICH also supports GPU devices. If you are using an MPI application compiled with GPU support, enable CUDA functionality by loading a cuda module and setting or exporting this environment variable before calling the MPI launcher in your job by including this in your script: <div class="language-sh highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nv>MPICH_GPU_SUPPORT_ENABLED</span><span class=o>=</span><span class=m>1</span>
</span></code></pre></div></p> <p>Also, if your GPU-enabled MPI application makes use of managed memory, you also need to set this environment variable: <div class="language-sh highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nv>MPICH_GPU_MANAGED_MEMORY_SUPPORT_ENABLED</span><span class=o>=</span><span class=m>1</span>
</span></code></pre></div></p> <p>At runtime, you will also need to pass information about job parallelism to the <code>mpiexec</code> (or <code>mpirun</code> / <code>aprun</code>) launcher because this information is not automatically taken from the PBS job script. You can pass this information by setting environment variables or by using <code>mpiexec</code> options. Full details of runtime settings for launching parallel programs can be found by running <code>man mpiexec</code>.</p> <p>The primary settings you will need are:</p> <ul> <li> <p>the number of mpi ranks (<code>-n / PALS_NRANKS</code>)</p> </li> <li> <p>the number of ranks per node (<code>-ppn / PALS_PPN</code>)</p> </li> <li> <p>the number of OpenMP threads or CPUs to associate with each rank (<code>-d / PALS_DEPTH</code>)</p> </li> <li> <p>binding options (<code>--cpu-bind / PALS_CPU_BIND</code>)</p> </li> </ul> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p><strong>Cray MPICH</strong> has many tunable parameters you can set through environment variables. Run <code>man mpi</code> for a complete listing of these environment variables.</p> </div> <p>Example PBS select statements and corresponding MPI launch options are shown below for binding a hybrid MPI + OpenMP application (144 MPI ranks, and 4 OpenMP threads per MPI rank, which requires 5 nodes but does not fully subscribe the last node). Examples of both methods – setting environment variables and passing options to <code>mpiexec</code> – are provided.</p> <h4 id=environment-variable-example>Environment variable example<a class=headerlink href=#environment-variable-example title="Permanent link">&para;</a></h4> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>bash</label><label for=__tabbed_1_2>tcsh</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1>#PBS -l select=5:ncpus=128:mpiprocs=32:ompthreads=4</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=nb>export</span><span class=w> </span><span class=nv>PALS_NRANKS</span><span class=o>=</span><span class=m>144</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=nb>export</span><span class=w> </span><span class=nv>PALS_PPN</span><span class=o>=</span><span class=m>32</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=nb>export</span><span class=w> </span><span class=nv>PALS_DEPTH</span><span class=o>=</span><span class=m>4</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=nb>export</span><span class=w> </span><span class=nv>PALS_CPU_BIND</span><span class=o>=</span>depth
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>mpiexec<span class=w> </span>./a.out
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-tcsh highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c>#PBS -l select=5:ncpus=128:mpiprocs=32:ompthreads=4</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=nb>setenv </span>PALS_NRANKS 144
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=nb>setenv </span>PALS_PPN 32
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=nb>setenv </span>PALS_DEPTH 4
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=nb>setenv </span>PALS_CPU_BIND depth
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a>mpiexec ./a.out
</span></code></pre></div> </div> </div> </div> <h4 id=mpiexec-options-example><code>mpiexec</code> options example<a class=headerlink href=#mpiexec-options-example title="Permanent link">&para;</a></h4> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>bash</label><label for=__tabbed_2_2>tcsh</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1>#PBS -l select=5:ncpus=128:mpiprocs=32:ompthreads=4</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>mpiexec<span class=w> </span>--cpu-bind<span class=w> </span>depth<span class=w> </span>-n<span class=w> </span><span class=m>144</span><span class=w> </span>-ppn<span class=w> </span><span class=m>32</span><span class=w> </span>-d<span class=w> </span><span class=m>4</span><span class=w> </span>./a.out
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-tcsh highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c>#PBS -l select=5:ncpus=128:mpiprocs=32:ompthreads=4</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>mpiexec --cpu-bind depth -n 144 -ppn 32 -d 4 ./a.out
</span></code></pre></div> </div> </div> </div> <h3 id=other-compilers>Other compilers<a class=headerlink href=#other-compilers title="Permanent link">&para;</a></h3> <p>These additional compilers are available on Derecho.</p> <ul> <li> <p>NVIDIA’s HPC SDK</p> </li> <li> <p>Intel compilers</p> </li> <li> <p>the GNU Compiler Collection (GCC)</p> </li> </ul> <p>When using non-Cray compilers, you can use either the compiler collection’s own commands (e.g., <code>ifort</code>, <code>nvfortran</code>) or the equivalent CPE command (e.g., <code>ftn</code>) as long as you have loaded your desired compiler module. If you do not have the <code>ncarcompilers</code> module loaded and you are using the <code>cray-mpich</code> MPI, you will need to use a CPE command.</p> <h4 id=using-intel-compilers>Using Intel compilers<a class=headerlink href=#using-intel-compilers title="Permanent link">&para;</a></h4> <p>The Intel compiler suite is available via the <code>intel</code> module. It includes compilers for C, C++, and Fortran codes. by default.</p> <p>To see which versions are available, use the <code>module avail</code> command. <div class="language-sh highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>module<span class=w> </span>avail<span class=w> </span>intel
</span></code></pre></div></p> <p>To load the default Intel compiler, use <code>module load</code> without specifying a version. <div class="language-sh highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>module<span class=w> </span>load<span class=w> </span>intel
</span></code></pre></div></p> <p>To load a different version, specify the version number when loading the module.</p> <p>Similarly, you can swap your current compiler module to Intel by using the <code>module swap</code> command. <div class="language-sh highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>module<span class=w> </span>swap<span class=w> </span>cce/14.0.3<span class=w> </span>intel
</span></code></pre></div></p> <p>Extensive documentation for using the Intel compilers is available <a href=https://www.intel.com/content/www/us/en/developer/tools/oneapi/toolkits.html>online here</a>. To review the manual page for a compiler, run the <code>man</code> command for it as in this example: <div class="language-sh highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>man<span class=w> </span>ifort
</span></code></pre></div></p> <div class="admonition note"> <p class=admonition-title>What's the difference between the <code>intel</code>, <code>intel-oneapi</code>, <code>intel-classic</code> modules?</p> <p>Users migrating from Cheyenne and previous Casper deployments may note there are several "flavors" of the Intel compiler available through the module system.</p> <p>Intel is currently moving from their "classic" compiler suite to the new "OneAPI" family. During this process both sets of compilers are available, but through different commands under different <code>module</code> selections:</p> <table> <thead> <tr> <th>Module</th> <th><strong>Fortran</strong></th> <th><strong>C</strong></th> <th><strong>C++</strong></th> </tr> </thead> <tbody> <tr> <td><code>intel-classic</code></td> <td><code>ifort</code></td> <td><code>icc</code></td> <td><code>icpc</code></td> </tr> <tr> <td><code>intel-oneapi</code></td> <td><code>ifx</code></td> <td><code>icx</code></td> <td><code>icpx</code></td> </tr> <tr> <td><code>intel</code><br>(default)</td> <td><code>ifort</code></td> <td><code>icx</code></td> <td><code>icpx</code></td> </tr> </tbody> </table> <p>The <code>intel-classic</code> module makes the familiar <code>ifort/icc/icpc</code> compilers available, however it is expected these will be deprecated during Casper's lifetime. At this stage we expect to keep existing compiler versions available, however there will be no further updates.</p> <p>The <code>intel-oneapi</code> module uses the new <code>ifx/icx/icpx</code> compilers.</p> <p>The default <code>intel</code> module presently uses the older <code>ifort</code> Fortran compiler along with the newer <code>icx/icpx</code> C/C++ compilers. This choice is intentional as the newer <code>ifx</code> does not reliably match the performance of <code>ifort</code> in all cases. We will continue to monitor the progress of the OneAPI compilers and will change this behavior in the future.</p> </div> <h5 id=optimizing-your-code-with-intel-compilers>Optimizing your code with Intel compilers<a class=headerlink href=#optimizing-your-code-with-intel-compilers title="Permanent link">&para;</a></h5> <p>Intel compilers provide several different optimization and vectorization options. By default, they use the <code>-O2</code> option, which includes some optimizations.</p> <p>Using <code>-O3</code> instead will provide more aggressive optimizations that may not improve the performance of some programs, while <code>-O1</code> enables minimal optimization. A higher level of optimization might increase your compile time significantly.</p> <p>You can also disable any optimization by using <code>-O0</code>.</p> <p>Be aware that compiling CPU code with the Intel compiler on Derecho is significantly different from using the Intel compiler on the Cheyenne system. Flags that are commonly used on Cheyenne might cause Derecho jobs to fail or run much more slowly than otherwise possible.</p> <div class="admonition tip"> <p class=admonition-title>CPU Architecture Flags to use on Derecho</p> <p><strong>DO use on Derecho: <code>-march=core-avx2</code></strong></p> </div> <div class="admonition danger"> <p class=admonition-title>Do NOT use on Derecho:</p> <p><strong>Do NOT use on Derecho: <code>-xHost</code> , <code>-axHost</code> , <code>-xCORE-AVX2</code> , <code>-axCORE-AVX2</code></strong></p> <p>These flags will generate code that may not run, or will run suboptimally on Derecho.</p> </div> <h5 id=examples>Examples<a class=headerlink href=#examples title="Permanent link">&para;</a></h5> <p>To compile and link a single Fortran program and create an executable, follow this example: <div class="language-sh highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>ifort<span class=w> </span>filename.f90<span class=w> </span>-o<span class=w> </span>filename.exe
</span></code></pre></div></p> <p>To enable multi-threaded parallelization (OpenMP), include the <code>-qopenmp</code> flag as shown here: <div class="language-sh highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>ifort<span class=w> </span>-qopenmp<span class=w> </span>filename.f90<span class=w> </span>-o<span class=w> </span>filename.exe
</span></code></pre></div></p> <h2 id=compiling-gpu-code>Compiling GPU code<a class=headerlink href=#compiling-gpu-code title="Permanent link">&para;</a></h2> <p>On Derecho, GPU applications should be built with either the Cray compilers or the NVIDIA HPC SDK compilers and libraries. In the following examples, we demonstrate the use of NVIDIA’s tools.</p> <p>Additional compilation flags for GPU code will depend in large part on which GPU-programming paradigm is being used (e.g., OpenACC, OpenMP, CUDA) and which compiler collection you have loaded. The following examples show basic usage, but note that many customizations and optimizations are possible. You are encouraged to read the relevant man page for the compiler you choose.</p> <h3 id=openacc>OpenACC<a class=headerlink href=#openacc title="Permanent link">&para;</a></h3> <p>To compile with OpenACC directives, simply add the <code>-acc</code> flag to your invocation of nvc, nvc++, or nvfortan. A Fortran example: <div class="language-sh highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>nvfortran<span class=w> </span>-o<span class=w> </span>acc_bin<span class=w> </span>-acc<span class=w> </span>acc_code.f90
</span></code></pre></div></p> <p>You can gather more insight into GPU acceleration decisions made by the compiler by adding <code>-Minfo=accel</code> to your invocation. Using compiler options, you can also specify which GPU architecture to target. This example will request compilation for both V100 (as on Casper) and A100 GPUs (as on Derecho): <div class="language-sh highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>nvfortran<span class=w> </span>-o<span class=w> </span>acc_bin<span class=w> </span>-acc<span class=w> </span>-gpu<span class=o>=</span>cc70,cc80<span class=w> </span>acc_code.f90
</span></code></pre></div></p> <p>Specifying multiple acceleration targets will increase the size of the binary and the time it takes to compile the code.</p> <h3 id=openmp>OpenMP<a class=headerlink href=#openmp title="Permanent link">&para;</a></h3> <p>Using OpenMP to offload code to the GPU is similar to using OpenACC. To compile a code with OpenMP offloading, use the <code>-mp=gpu</code> flag. The aforementioned diagnostic and target flags also apply to OpenMP offloading. <div class="language-sh highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>nvfortran<span class=w> </span>-o<span class=w> </span>omp_gpu<span class=w> </span>-mp<span class=o>=</span>gpu<span class=w> </span>omp.f90
</span></code></pre></div></p> <h3 id=cuda>CUDA<a class=headerlink href=#cuda title="Permanent link">&para;</a></h3> <p>The process for compiling CUDA code depends on whether you are using C++ or Fortran. For C++, the process often involves multiple stages in which you first use <code>nvcc``, the NVIDIA CUDA compiler, and then your C++ compiler of choice. <div class="language-sh highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>nvcc<span class=w> </span>-c<span class=w> </span>-arch<span class=o>=</span>sm_80<span class=w> </span>cuda_code.cu
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>g++<span class=w> </span>-o<span class=w> </span>cuda_bin<span class=w> </span>-lcuda<span class=w> </span>-lcudart<span class=w> </span>main.cpp<span class=w> </span>cuda_code.o
</span></code></pre></div> Using the</code>nvcc` compiler driver with a non-NVIDIA C++ compiler requires loading a cuda environment module in addition to the compiler of choice.</p> <p>The compiler handles CUDA code directly, so the compiler you use must support CUDA. This means you should use <code>nvfortran</code>. If your source code file ends with the <code>.cuf</code> extension, nvfortran will enable CUDA automatically. Otherwise, you can specify the <code>-Mcuda</code> flag to the compiler. <div class="language-sh highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>nvfortran<span class=w> </span>-Mcuda<span class=w> </span>-o<span class=w> </span>cf_bin<span class=w> </span>cf_code.f90
</span></code></pre></div></p> <h2 id=native-compiler-commands>Native Compiler Commands<a class=headerlink href=#native-compiler-commands title="Permanent link">&para;</a></h2> <p>We recommend using the module wrapper commands described above. However, if you prefer to invoke the compilers directly without the <code>ncarcompilers</code> wrappers, see this note:</p> <details class=note> <summary>Native Compiler Commands</summary> <p>We recommend using the module wrapper commands described above. However, if you prefer to invoke the compilers directly, unload the NCAR default compiler wrapper environment by entering this on your command line: <div class="language-sh highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>module<span class=w> </span>unload<span class=w> </span>ncarcompilers
</span></code></pre></div></p> <p>You can still use the environment variables that are set by the modules that remain loaded, as shown in the following examples of invoking compilers directly to compile a Fortran program.</p> <div class="tabbed-set tabbed-alternate" data-tabs=3:4><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><input id=__tabbed_3_2 name=__tabbed_3 type=radio><input id=__tabbed_3_3 name=__tabbed_3 type=radio><input id=__tabbed_3_4 name=__tabbed_3 type=radio><div class=tabbed-labels><label for=__tabbed_3_1>Intel compiler</label><label for=__tabbed_3_2>NVIDIA HPC compiler</label><label for=__tabbed_3_3>GNU compiler collection (GCC)</label><label for=__tabbed_3_4>Cray Compilers (CPE)</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>ifort<span class=w> </span>-o<span class=w> </span>a.out<span class=w> </span><span class=nv>$NCAR_INC_</span>&lt;PACKAGE&gt;<span class=w> </span>program_name.f<span class=w> </span><span class=nv>$NCAR_LDFLAGS_</span>&lt;PACKAGE&gt;<span class=w> </span>-l&lt;package_library&gt;
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>nvfortran<span class=w> </span>-o<span class=w> </span>a.out<span class=w> </span><span class=nv>$NCAR_INC_</span>&lt;PACKAGE&gt;<span class=w> </span>program_name.f<span class=w> </span><span class=nv>$NCAR_LDFLAGS_</span>&lt;PACKAGE&gt;<span class=w> </span>-l&lt;package_library&gt;
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>gfortran<span class=w> </span>-o<span class=w> </span>a.out<span class=w> </span><span class=nv>$NCAR_INC_</span>&lt;PACKAGE&gt;<span class=w> </span>program_name.f<span class=w> </span><span class=nv>$NCAR_LDFLAGS_</span>&lt;PACKAGE&gt;<span class=w> </span>-l&lt;package_library&gt;
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-sh highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>ftn<span class=w> </span>-o<span class=w> </span>a.out<span class=w> </span><span class=nv>$NCAR_INC_</span>&lt;PACKAGE&gt;<span class=w> </span>program_name.f<span class=w> </span><span class=nv>$NCAR_LDFLAGS_</span>&lt;PACKAGE&gt;<span class=w> </span>-l&lt;package_library&gt;
</span></code></pre></div> </div> </div> </div> </details> <h2 id=multiple-compiler-versions-and-user-applications>Multiple Compiler Versions and User Applications<a class=headerlink href=#multiple-compiler-versions-and-user-applications title="Permanent link">&para;</a></h2> <p>In addition to multiple compilers, CISL keeps available multiple versions of libraries to accommodate a wide range of users' needs. Rather than rely on the environment variable <code>LD_LIBRARY_PATH</code> to find the correct libraries dynamically, we encode library paths within the binaries when you build Executable and Linkable Format (ELF) executables. To do this, we use <code>RPATH</code> rather than <code>LD_LIBRARY_PATH</code> to set the necessary paths to shared libraries.</p> <p>This enables your executable to work regardless of updates to new default versions of the various libraries; it doesn't have to search dynamically at run time to load them. It also means you don't need to worry about setting the variable or loading another module, greatly reducing the likelihood of runtime errors.</p> <hr> <h2 id=common-compiler-options-and-diagnostic-flags>Common Compiler Options and Diagnostic Flags<a class=headerlink href=#common-compiler-options-and-diagnostic-flags title="Permanent link">&para;</a></h2> <p>Portability and correctness both are important goals when developing code. Non-standard code may not be portable, and its execution may be unpredictable.</p> <p>Using diagnostic options when you compile your code can help you find potential problems. Since the compiler is going to analyze your code anyway, it pays to take advantage of the diagnostic options to learn as much as you can from the analysis. Please note that some compilers disable the default optimization when you switch on certain debugging flags.</p> <p>Because of differences in compilers, it also is good practice to compile your code with each compiler that is available on the system, note any diagnostic messages you get, and revise your code accordingly.</p> <p>The following options can be helpful as you compile code to run in the HPC environment that CISL manages.</p> <table> <thead> <tr> <th>Compiler</th> <th>Flag</th> <th>Effect</th> </tr> </thead> <tbody> <tr> <td rowspan=5><strong>Cray</strong><br><a href="https://support.hpe.com/hpesc/public/docDisplay?docLocale=en_US&docId=a00115116en_us&page=Debug_Options.html">Cray C/C++ debug options</a></td> <td><code>-G0</code></td> <td>provide complete debugging information with optimizations disabled (i.e.<code>-O0</code>,<code>-O ipa0</code>,<code>-O scale0</code>,<code>-O vector0</code>).<br>Breakpoints can be set at different sections of the code for easier debugging.</td> </tr> <tr> <td><code>-G01</code></td> <td>generate debugging report with partial optimization.</td> <td></td> </tr> <tr> <td><code>-G02</code></td> <td>generate debugging report with full optimization.</td> <td></td> </tr> <tr> <td><code>-g</code></td> <td>generate debugging report (equivalent to<code>-G0</code>).</td> <td></td> </tr> <tr> <td><code>-h bounds</code></td> <td>Enables checking of array bounds, pointer and array references at runtime.</td> <td></td> </tr> <tr> <td rowspan=6><strong>Intel</strong><br><a href=https://software.intel.com/en-us/cpp-compiler-developer-guide-and-reference-compiler-diagnostic-options>Intel C++ diagnostic options</a></td> <td><code>-debug all</code></td> <td>provides complete debugging information.</td> </tr> <tr> <td><code>-g</code></td> <td>places symbolic debugging information in the executable program.</td> <td></td> </tr> <tr> <td><code>-check all</code></td> <td>performs all runtime checks (includes bounds checking).</td> <td></td> </tr> <tr> <td><code>-warn all</code></td> <td>enables all warnings.</td> <td></td> </tr> <tr> <td><code>-stand f08</code></td> <td>warns of usage that does not conform to the Fortran 2008 standard.</td> <td></td> </tr> <tr> <td><code>-traceback</code></td> <td>enables stack trace if the program crashes.</td> <td></td> </tr> <tr> <td rowspan=4><strong>GCC</strong><br><a href=http://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Warning-Options.html>GCC diagnostic warning ptions</a></td> <td><code>-ggdb</code></td> <td>places symbolic debugging information in the executable program for use by GDB.</td> </tr> <tr> <td><code>-fcheck=all</code></td> <td>performs all runtime checks (includes bounds checking).</td> <td></td> </tr> <tr> <td><code>-Wall</code></td> <td>enables all warnings.</td> <td></td> </tr> <tr> <td><code>-std=f2008</code></td> <td>warns of usage that does not conform to the Fortran 2008 standard.</td> <td></td> </tr> <tr> <td rowspan=5><strong>NVIDIA HPC SDK</strong><br><a href=https://docs.nvidia.com/hpc-sdk/compilers/hpc-compilers-user-guide/#freq-used-options>NVIDIA HPC SDK documentation</a>.</td> <td><code>-g</code></td> <td>Include symbolic debugging information in the object modules with optimization disabled (<code>-O0</code>).</td> </tr> <tr> <td><code>-gopt</code></td> <td>Include symbolic debugging information in the object modules without affecting any optimizations.</td> <td></td> </tr> <tr> <td><code>-C</code> or<br> <code>-Mbounds</code></td> <td>Add array bounds checking.</td> <td></td> </tr> <tr> <td><code>-Mchkptr</code></td> <td>Check for unintended de-referencing of NULL pointers.</td> <td></td> </tr> <tr> <td><code>-Minform=inform</code></td> <td>Display all the error messages of any severity (inform, warn, severe and fatal) during compilation phase.</td> <td></td> </tr> </tbody> </table> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2024-01-12T03:32:18+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-01-12</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2024-01-12T03:32:18+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-01-12</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../derecho-use-policies/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Derecho Use Policies" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Derecho Use Policies </div> </div> </a> <a href=../starting-derecho-jobs/ class="md-footer__link md-footer__link--next" aria-label="Next: Starting Derecho jobs" rel=next> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Starting Derecho jobs </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2023 UCAR, Licensed under the <a href=https://creativecommons.org/licenses/by-sa/4.0/ >Creative Commons CC-BY-SA 4.0</a>. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://arc.ucar.edu/ target=_blank rel=noopener title=arc.ucar.edu class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19.07 4.93C17.22 3 14.66 1.96 12 2c-2.66-.04-5.21 1-7.06 2.93C3 6.78 1.96 9.34 2 12c-.04 2.66 1 5.21 2.93 7.06C6.78 21 9.34 22.04 12 22c2.66.04 5.21-1 7.06-2.93C21 17.22 22.04 14.66 22 12c.04-2.66-1-5.22-2.93-7.07M17 12v6h-3.5v-5h-3v5H7v-6H5l7-7 7.5 7H17Z"/></svg> </a> <a href=https://ithelp.ucar.edu/plugins/servlet/desk/site/rc target=_blank rel=noopener title=ithelp.ucar.edu class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m15.07 11.25-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2 2 2 0 0 0-2 2H8a4 4 0 0 1 4-4 4 4 0 0 1 4 4 3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10Z"/></svg> </a> <a href=https://github.com/NCAR target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://join.slack.com/t/ncarhpcusergroup/shared_invite/zt-1z00napom-SU0X8CzJWVY90C2GzRvUCg target=_blank rel=noopener title=join.slack.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg> </a> </div> </div> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <table class=md-footer-meta__inner> <colgroup> <col style="width: 10%"> <col style="width: 90%"> </colgroup> <tbody> <tr> <td valign=center> <img alt="National Science Foundation" src=https://www.nsf.gov/news/mmg/media/images/bitmaplogo_nolayers_f_e50fcd0b-607b-4271-a808-914d9c2f65dc.png height=140 width=180> </td> <td valign=center> <p style="font-size:0.75em; "> This material is based upon work supported by the National Center for Atmospheric Research, a major facility sponsored by National Science Foundation and managed by the University Corporation for Atmospheric Research. Any opinions, findings and conclusions or recommendations expressed in this material do not necessarily reflect the views of the National Science Foundation. </p> </td> </tr> </tbody> </table> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.annotate", "content.code.copy", "content.action.edit", "content.action.view", "navigation.footer", "navigation.indexes", "navigation.top", "navigation.path", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "announce.dismiss"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.d7c377c4.min.js></script> <script src=../../../js/timeago.min.js></script> <script src=../../../js/timeago_mkdocs_material.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> <script src=../../../js/open_in_new_tab.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>